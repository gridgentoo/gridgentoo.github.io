(window.webpackJsonp=window.webpackJsonp||[]).push([[224],{651:function(t,e,r){"use strict";r.r(e),r.d(e,"dispatchRemoveNotificationElement",function(){return w});var n=r(57),o=r(3),i=r(20),a=r(55),c=r(28),s=r(1325),u=r.n(s);function l(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function d(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){f(i,n,o,a,c,"next",t)}function c(t){f(i,n,o,a,c,"throw",t)}a(void 0)})}}var v=function(){var t=d(regeneratorRuntime.mark(function t(e,r,o){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"_blank"!==(i=r.getAttribute("target"))&&e.preventDefault(),t.prev=2,t.next=5,n.default.postFormData("/shards/notifications/mark_as_read",{id:o});case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(2),console.error(t.t0),t.abrupt("return");case 11:if("_blank"!==i){t.next=13;break}return t.abrupt("return");case 13:Object(c.a)(window.location.href).href===Object(c.a)(r.getAttribute("href")).href?window.location.reload():window.location.href=r.getAttribute("href");case 14:case"end":return t.stop()}},t,null,[[2,7]])}));return function(e,r,n){return t.apply(this,arguments)}}(),p=function(t,e){var r,n=t.closest(".HH-UserNotifications-Content");n&&(1===n.children.length?n.innerHTML=u.a.render(e):n.removeChild(t.parentNode),0===n.querySelectorAll(".HH-UserNotifications-Notification").length&&(r=document.querySelector(".HH-UserNotifications-Counter"))&&r.parentNode.removeChild(r))},h=function(){var t=d(regeneratorRuntime.mark(function t(e,r,o,i,c){var s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.stopPropagation(),s=new a.a(i.querySelector(".HH-UserNotifications-Spinner"),"UserNotifications"),void 0!==i.dataset.surveyId&&n.default.delete("/surveys/loyalty").catch(console.error),r.classList.add("g-hidden"),s.start(),t.prev=6,t.next=9,n.default.delete("/shards/notifications?id=".concat(o));case 9:t.next=16;break;case 11:return t.prev=11,t.t0=t.catch(6),s.stop(),console.error(t.t0),t.abrupt("return");case 16:s.stop(),p(i,c);case 18:case"end":return t.stop()}},t,null,[[6,11]])}));return function(e,r,n,o,i){return t.apply(this,arguments)}}(),w=function(t){window.dispatchEvent(new CustomEvent("HH-UserNotifications-RemoveElement",{detail:{id:t}}))},H=function(t,e){return l(t.querySelectorAll(".HH-UserNotifications-Notification")).find(function(t){return t.dataset.notificationId===e})};e.default=o.default.build({create:function(t,e){var r=e.trls,n=t.querySelector(".HH-UserNotifications-Content");window.addEventListener("HH-UserNotifications-RemoveElement",function(t){var e;if(null==t?void 0:null===(e=t.detail)||void 0===e?void 0:e.id){var o=H(n,t.detail.id);o&&p(o,r)}else i.default.log("error out","possible HHC/Banner bannersInitEvent error",t)}),t.addEventListener("click",function(t){var e=t.target.closest(".HH-UserNotifications-Notification");if(e){var n=e.dataset.notificationId,o=t.target.closest(".HH-UserNotifications-Link");if(o)v(t,o,n);else{var i=t.target.closest(".HH-UserNotifications-Close");i&&h(t,i,n,e,r)}}})},componentName:"js/HH/UserNotifications"})}}]);
//# sourceMappingURL=224.dc979ed32862b40f6e1d.js.map